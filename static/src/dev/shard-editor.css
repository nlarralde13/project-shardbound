/* shard-editor.css — unified, optimized (Matrix × Medieval) */

/* ---------- Theme tokens ---------- */
:root{
  --bg:        #000000;  /* pure black middle area */
  --bg-elev:   #0f141b;
  --panel:     #0b121a;
  --border:    #1c2430;
  --text:      #e6eef7;
  --muted:     #93a7bd;
  --input:     #101a25;
  --input-b:   #233244;

  /* Accents */
  --accent:    #6fffb0;  /* matrix green */
  --accent-2:  #c9a66b;  /* warm gilded accent */

  /* Effects */
  --panel-glow: 0 0 18px rgba(111,255,176,.08), 0 0 2px rgba(111,255,176,.25);
  --edge-fade:  linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(111,255,176,.05) 70%, rgba(111,255,176,.12) 100%);
}

/* ---------- App shell ---------- */
html,body{
  height:100%; margin:0;
  background:var(--bg); color:var(--text);
  font:14px/1.45 ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
}
#app{display:flex; flex-direction:column; height:100%}

/* Top bar */
.topbar{
  display:flex; align-items:center; gap:8px;
  padding:10px 14px; background:var(--bg-elev); border-bottom:1px solid var(--border)
}
.topbar .title{font-weight:700}
.topbar .spacer{flex:1}
.topbar .toolbar button,
.topbar .toolbar .link{
  background:var(--input); color:var(--text);
  border:1px solid var(--input-b); border-radius:8px; padding:7px 10px; cursor:pointer
}
.topbar .toolbar input[type="file"]{display:none}
.topbar .toolbar .file-btn{display:inline-flex}
.topbar .toolbar .file-btn span{
  background:var(--input); border:1px solid var(--input-b);
  border-radius:8px; padding:7px 10px; cursor:pointer
}

/* ---------- 3-column layout ---------- */
main{
  display:grid; grid-template-columns:320px 1fr 380px;
  gap:0; flex:1; min-height:0;
}

/* Left: JSON console */
.leftInfo{
  background:var(--panel); border-right:1px solid var(--border);
  padding:14px; height:100%;
  display:flex; flex-direction:column; gap:10px;
}
.jsonConsole{
  background:#0a0f15; border:1px solid var(--border); border-radius:8px; padding:10px; color:#b7d2f5;
  font:12px/1.5 ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;
  white-space:pre-wrap; word-break:break-word; flex:1; overflow:auto;
}

/* Middle: canvas column — pure black and centered */
.middle{
  position:relative; background:var(--bg); min-width:0;
  display:grid; place-items:center; /* centers the map within this column */
}
.canvasWrap{
  position:relative; width:100%; height:100%;
  min-height:calc(100vh - 60px); /* ensure a real height below the top bar */
}
#grid{ width:100%; height:100%; display:block; background:var(--bg) } /* no stripes */

/* Bottom status overlay */
.status{
  position:absolute; left:10px; bottom:8px; color:#8aa2bd;
  background:rgba(0,0,0,.45); padding:4px 8px; border-radius:6px
}

/* ---------- Right: editor sidebar ---------- */
.right{
  width:380px; min-width:320px; max-width:440px;
  padding:16px 32px 18px 16px;  /* extra breathing room on the far edge */
  background:
    repeating-linear-gradient(
      to bottom,
      rgba(111,255,176,.05) 0px,
      rgba(111,255,176,.05) 1px,
      transparent 2px,
      transparent 12px
    ),
    var(--bg-elev);
  border-left:1px solid var(--border);
  box-shadow: inset 0 0 0 1px rgba(111,255,176,.05);
  overflow-y:auto;           /* scrollable column so buttons never get clipped */
  overflow-x:hidden;
  display:flex; flex-direction:column; gap:14px; min-height:0;
}
.right::after{
  content:""; position:absolute; top:0; right:0; bottom:0; width:14px;
  background:var(--edge-fade); pointer-events:none;
}

/* Panels */
.panel{
  background:
    radial-gradient(120% 140% at 10% -20%, rgba(201,166,107,.06), transparent 60%),
    radial-gradient(140% 120% at 120% 120%, rgba(111,255,176,.05), transparent 50%),
    var(--panel);
  border:1px solid color-mix(in oklab, var(--border), var(--accent) 14%);
  border-radius:14px; padding:12px; margin:0; box-shadow:var(--panel-glow);
  transition: transform .06s ease, box-shadow .12s ease, border-color .12s ease;
}
.panel:hover{
  transform: translateY(-1px);
  box-shadow: 0 8px 22px rgba(0,0,0,.30), 0 0 22px rgba(111,255,176,.08);
  border-color: color-mix(in oklab, var(--border), var(--accent) 22%);
}

.panelTitle{
  font-weight:700; font-variant:small-caps; letter-spacing:.6px;
  position:relative; padding-bottom:6px;
}
.panelTitle::after{
  content:""; position:absolute; left:0; right:0; bottom:0; height:2px;
  background:linear-gradient(90deg, var(--accent), color-mix(in oklab, var(--accent-2), var(--accent) 40%), transparent);
  box-shadow:0 0 8px rgba(111,255,176,.4); opacity:.85;
}

/* <details> caret flair */
details > summary.panelTitle{ cursor:pointer; list-style:none; }
details > summary.panelTitle::-webkit-details-marker{ display:none; }
details > summary.panelTitle::before{
  content:"▸"; margin-right:8px; color:var(--accent);
  text-shadow:0 0 6px rgba(111,255,176,.7);
}
details[open] > summary.panelTitle::before{ content:"▾"; }

/* Form layout */
.grid2{ display:grid; grid-template-columns:1fr 1fr; gap:8px }
label{ display:flex; flex-direction:column; gap:6px; font-size:13px; color:#cfe1f5 }
label.row{ display:flex; flex-direction:row; align-items:center; justify-content:space-between }
label .hint{ font-size:12px; color:var(--muted) }

input, select, button, textarea{
  background:var(--input); color:var(--text);
  border:1px solid var(--input-b); border-radius:10px; padding:8px 10px;
}
input:focus, select:focus, textarea:focus{
  outline:none;
  border-color:color-mix(in oklab, var(--input-b), var(--accent) 45%);
  box-shadow:0 0 0 2px rgba(111,255,176,.15), 0 0 10px rgba(111,255,176,.12);
}

/* Buttons */
button{
  cursor:pointer; font-weight:600; letter-spacing:.3px;
  border-color:color-mix(in oklab, var(--input-b), var(--accent) 20%);
  transition: transform .05s ease, box-shadow .12s ease, border-color .12s ease, background .12s ease;
}
button:hover{
  transform: translateY(-1px);
  box-shadow:0 6px 18px rgba(0,0,0,.28), 0 0 12px rgba(111,255,176,.18);
  background:linear-gradient(180deg, rgba(111,255,176,.08), rgba(201,166,107,.06));
  border-color:color-mix(in oklab, var(--input-b), var(--accent) 38%);
}
button:active{ transform: translateY(1px) }

.btnRow{ display:flex; gap:10px; margin-top:10px }

/* Sticky action rows so Apply/Defaults/Regenerate are always reachable */
.stickyBtns{
  position:sticky; bottom:0; padding-top:8px;
  background:linear-gradient(180deg, transparent, rgba(11,18,26,.92));
  border-top:1px solid color-mix(in oklab, var(--border), var(--accent) 12%);
  z-index:1;
}

/* Long sections inside panels (e.g., metadata) can scroll locally if needed */
.scrollY{
  max-height:calc(100vh - 304px);
  overflow-y:auto; padding-right:10px; scrollbar-width:thin;
}
.scrollY::-webkit-scrollbar{ width:8px }
.scrollY::-webkit-scrollbar-thumb{
  background:linear-gradient(var(--accent), color-mix(in oklab, var(--accent), var(--accent-2) 40%));
  border-radius:8px;
}

/* Kill any stray/test zoom UI elements if present */
.zoomOverlay, #fitBtn, #zinBtn, #zoutBtn{ display:none !important }
