<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shard Viewer</title>
  <link rel="stylesheet" href="/static/css/shard-viewer.css" />
</head>
<body>
  <header><h1>Shard Viewer</h1></header>

  <main class="wrap">
    <!-- LEFT: Load + Viewer + Generator -->
    <aside class="card pane-left">
      <h2>Load / Generate</h2>
      <section>
        <div class="row"><label>Shard</label><select id="shardSelect"></select></div>
        <div class="row"><label></label><button id="btnLoad">Load</button></div>

        <div class="group">
          <h3>Viewer</h3>
          <div class="row"><label>Scale (px/tile)</label><input id="scale" type="number" min="1" max="64" value="8" /></div>
          <div class="row"><label>Show grid</label><input id="grid" type="checkbox" checked /></div>
          <div class="row"><label>Auto-fit</label><input id="autoFit" type="checkbox" checked /></div>
          <div class="row"><label>CRT scanlines</label><input id="crtMode" type="checkbox" /></div>
          <div class="muted" id="status" aria-live="polite">Ready.</div>
        </div>

        <div class="group">
          <h3>Generate Shard</h3>
          <div class="row"><label>Preset</label><select id="preset"></select></div>
          <div class="row"><label>Base Name</label><input id="baseName" placeholder="shard_fire_island" /></div>

          <div class="row inline-3">
            <div style="grid-column:1/3;display:flex;gap:8px;align-items:center">
              <input type="checkbox" id="autoSeed" checked />
              <label for="autoSeed">Auto-seed (unique 8-digit)</label>
            </div>
            <div style="display:flex;gap:8px;align-items:center">
              <label for="seedId">Seed</label>
              <input id="seedId" type="number" min="10000000" max="99999999" step="1" placeholder="########" disabled />
              <button id="btnReroll" class="secondary" style="min-width:86px" disabled>Re-roll</button>
            </div>
          </div>

          <div class="row inline-2">
            <div style="display:flex;gap:8px;align-items:center"><label for="width">Width</label><input id="width" type="number" min="16" max="2048" value="64" /></div>
            <div style="display:flex;gap:8px;align-items:center"><label for="height">Height</label><input id="height" type="number" min="16" max="2048" value="64" /></div>
          </div>

          <div class="row">
            <label>Landmass %</label>
            <div style="display:flex;gap:8px;align-items:center">
              <input id="landmass" type="range" min="10" max="80" step="1" value="44" style="width:100%" />
              <span id="landmassVal">44%</span>
            </div>
          </div>

          <div class="row inline-2">
            <div style="display:flex;gap:8px;align-items:center"><label for="ports">Ports</label><input id="ports" type="number" min="0" max="8" value="2" /></div>
            <div style="display:flex;gap:8px;align-items:center"><label for="settlements">Settlements</label><input id="settlements" type="number" min="0" max="12" value="3" /></div>
          </div>

          <div class="row inline-3">
            <div style="grid-column:1/4;display:flex;gap:8px;align-items:center">
              <input type="checkbox" id="volcanoEnabled" checked />
              <label for="volcanoEnabled">Volcano enabled</label>
            </div>
            <div style="display:flex;gap:8px;align-items:center"><label for="volMin">Min R</label><input id="volMin" type="number" min="1" max="8" value="2" /></div>
            <div style="display:flex;gap:8px;align-items:center"><label for="volMax">Max R</label><input id="volMax" type="number" min="1" max="12" value="4" /></div>
          </div>

          <div class="row auto">
            <div class="biomes" id="biomeChecks"></div>
          </div>

          <div class="row"><label></label><button id="btnGenerate">Generate & Load</button></div>

          <div class="legend" id="legend"></div>
        </div>
      </section>
    </aside>

    <div class="gutter" id="gutter" role="separator" aria-orientation="vertical" aria-label="Resize sidebar" tabindex="0"></div>

    <section class="card viewer">
      <h2>Map</h2>
      <section class="canvas-wrap" id="frame">
        <canvas id="canvas"></canvas>
        <div class="tooltip" id="tooltip"></div>
        <div class="zoomOverlay">
          <button class="zbtn" id="btnFit" title="Fit (refit)">⤢</button>
          <button class="zbtn" id="btnZoomIn" title="Zoom in">+</button>
          <button class="zbtn" id="btnZoomOut" title="Zoom out">−</button>
        </div>
      </section>
      <section>
        <div class="legend" id="legend2"></div>
      </section>
    </section>
  </main>

  <script type="module" src="/static/js/shard-viewer.js"></script>
</body>
</html>
