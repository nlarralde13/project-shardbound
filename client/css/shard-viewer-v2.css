/* /static/css/shard-viewer-v2.css
   v2: pixel-perfect canvases, overlay ordering, tooltip, and mobile comfort */

/* Create a stacking context and carry the border on the WRAP, not canvases */
.canvas-wrap {
  position: relative;
  isolation: isolate;
  background: #0a0f1f;
  border: 1px solid var(--line);
  border-radius: 10px;
  overflow: hidden;
  display: inline-block; /* shrink to map size */
}

/* Both canvases: absolutely fill the wrap */
#canvas,
#overlayCanvasV2,
#overlayCanvasLite {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  display: block;
  image-rendering: pixelated;
  background: transparent !important;
  border: none !important;
  border-radius: 0 !important;
}

/* Overlay above base, but ignore pointer events so hover math works */
#canvas { z-index: 2; }
#overlayCanvasV2,
#overlayCanvasLite { z-index: 5; pointer-events: none; }

/* Floating tooltip above everything */
#tooltip {
  position: absolute;
  left: 0; top: 0;
  display: none;
  background: rgba(0,0,0,.85);
  color: #fff;
  padding: 4px 6px;
  border-radius: 6px;
  font-size: 12px;
  pointer-events: none;
  z-index: 50;
  transform: translate3d(0,0,0);
  will-change: transform, opacity;
}

/* Optional: scanline veneer still works via .canvas-wrap.crt::after */
.canvas-wrap.crt::after {
  content:"";
  position:absolute; inset:0; pointer-events:none;
  background: repeating-linear-gradient(
    to bottom,
    rgba(255,255,255,.04),
    rgba(255,255,255,.04) 1px,
    transparent 2px
  );
  border-radius:10px;
  z-index: 3;
  mix-blend-mode: overlay;
}

/* Zoom buttons: touch-friendly */
.zoomOverlay .zbtn {
  min-width: 44px;
  min-height: 44px;
  font-size: 20px;
}

/* iPad 10" friendly layout */
@media (max-width: 1100px) {
  main.wrap { display: grid; grid-template-columns: 1fr; gap: 12px; }
  .pane-left { order: 2; }
  .viewer    { order: 1; }
  input, select, button { min-height: 44px; font-size: 16px; }
  .row.inline-3, .row.inline-2 {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 8px;
  }
  .row.inline-3 > *:last-child { grid-column: 1 / -1; }
}

/* Allow the canvas wrap to maintain aspect without overflowing */
.viewer .canvas-wrap { /* fixed size; keep as-is */ }
