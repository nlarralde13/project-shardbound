/* Map Overlay â€” all visuals live here (D&D field-journal) */
:root{
  --map-panel-w: 900px;
  --map-holder-w: 800px;
  --map-holder-h: 540px;
  --parchment-1:#f4ecd8; --parchment-2:#efe6cf; --parchment-edge:#c7bda4; --ink:#221a11;
  --shell-inner: rgba(12,16,24,.92); --glow: 0 16px 48px rgba(0,0,0,.55);
  --accent-blue:#8CC7FF; --label:#CFE3FF;
}

/* Panel */
#overlayMap .map-panel{
  width: var(--map-panel-w); max-width: 96vw;
  display:grid; grid-template-rows:auto 1fr auto; gap:12px;
  border-radius:16px; background:linear-gradient(180deg, var(--shell-inner), var(--shell-inner));
  border:1px solid rgba(255,255,255,.08); box-shadow:var(--glow), inset 0 0 0 1px rgba(255,255,255,.05);
}

/* Top banner */
#overlayMap .map-top{ padding:10px 14px; background:linear-gradient(180deg, rgba(240,232,210,.08), rgba(240,232,210,.02));
  border-bottom:1px solid rgba(255,255,255,.08) }
#overlayMap .map-top__inner{ display:flex; align-items:center; justify-content:space-between; gap:10px }
#overlayMap .map-title{ font:600 18px/1.2 "Cinzel","IM Fell English","Crimson Text",Georgia,serif; letter-spacing:.4px; color:#f1ead6; text-shadow:0 1px 0 rgba(0,0,0,.5) }
#overlayMap .map-close.btn{ border-radius:999px; padding:6px 10px; font-size:13px; color:#eaf2ff; border:1px solid rgba(0,0,0,.3);
  background:linear-gradient(180deg,#2b4070,#1c2b4d); box-shadow:0 1px 0 rgba(255,255,255,.08), 0 6px 16px rgba(0,0,0,.35) }

/* Map area */
#overlayMap .map-frame{ padding:12px }
#overlayMap .map-holder{
  width:var(--map-holder-w); height:var(--map-holder-h);
  margin:0 auto; display:flex; align-items:center; justify-content:center;
}
#overlayMap .map-box{
  position:relative; width:100%; height:100%; border-radius:12px; overflow:hidden;
  background: radial-gradient(600px 380px at 60% 20%, rgba(40,120,255,.07), transparent 55%),
             linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.08);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), 0 8px 22px rgba(0,0,0,.38);
}

/* Canvases stack */
#overlayMap .map-box canvas{ position:absolute; inset:0; image-rendering:pixelated }
#overlayMap .map-base{ z-index:1 } #overlayMap #mapFX{ z-index:2; pointer-events:none } #overlayMap #mapPOI{ z-index:3; pointer-events:none }

/* Bottom banner (legend only) */
#overlayMap .map-bottom{ padding:10px 14px; background:linear-gradient(180deg, rgba(240,232,210,.02), rgba(240,232,210,.06));
  border-top:1px solid rgba(255,255,255,.08) }
#overlayMap .map-bottom__inner{ display:flex; align-items:center; justify-content:center; gap:16px; flex-wrap:wrap }
#overlayMap .legend-list{ display:flex; align-items:center; gap:16px; flex-wrap:wrap; color:var(--label); font-size:12px }
#overlayMap .legend-item{ display:inline-flex; align-items:center; gap:8px }
#overlayMap .swatch{ width:16px; height:12px; border-radius:3px; display:inline-block; box-shadow: inset 0 0 0 1px rgba(255,255,255,.18) }
#overlayMap .swatch.ocean{ background:#0b3a74 } #overlayMap .swatch.coast{ background:#d9c38c } #overlayMap .swatch.plains{ background:#91c36e } #overlayMap .swatch.forest{ background:#2e7d32 }
#overlayMap .legend-icon{ width:14px; height:14px; image-rendering:pixelated }

/* Responsive */
@media (max-width:980px){
  :root{ --map-panel-w:92vw; --map-holder-w:86vw; --map-holder-h:58vh; }
}
