<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Shardbound — Layout Sandbox</title>
  <link rel="icon" href="data:," />
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@500;700&display=swap" rel="stylesheet">
  <!-- Styles -->
  <link rel="stylesheet" href="/static/css/ui-layout.css" />
</head>

<body class="theme-fantasy">
  <!-- Top banner -->
  <header id="banner" class="card">
    <div class="brand">Shardbound — Layout Sandbox</div>
    <div class="spacer"></div>

    <!-- user chip (optional; keeps your current script happy) -->
    <div id="userChip" class="user-chip">
      <button class="user-chip-btn" type="button" aria-expanded="false">
        <span class="avatar"><span class="initials">N</span><span class="status-dot"></span></span>
        <span class="label">
          <span class="hello">Logged in as</span>
          <span class="name" id="chipName">n/a</span>
        </span>
        <svg class="chev" width="14" height="14" viewBox="0 0 24 24"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
      </button>
      <div class="user-menu" id="userMenu" hidden>
        <button data-action="account">Account</button>
        <button data-action="settings">Settings</button>
        <div class="menu-sep"></div>
        <div class="group-label">Layout</div>
        <button data-action="toggle-free">Lock/Unlock</button>
        <button data-action="reset-layout">Reset Layout</button>
      </div>
    </div>
  </header>

  <!-- Playfield (bounded area that panels live in) -->
  <div id="playfield" class="free">
    <div id="snapGrid" aria-hidden="true"></div>

    <!-- Console (placeholder) -->
    <section class="card panel" id="cardConsole" style="left:0; top:0;">
      <header class="card-h">Console</header>
      <div class="muted">…</div>
    </section>

    <!-- Character (paperdoll) -->
    <section class="card panel" id="cardCharacter" style="left:180px; top:0;">
      <header class="card-h">Character</header>

      <div class="paperdoll">
        <div class="paperdoll-stage">
          <!-- sprite -->
          <img class="doll-image"
               src="/static/assets/character_models/placeholder_warrior.png"
               alt="Character" draggable="false" />
          <!-- slots (CSS arranges them in a 3x3 with satellites) -->
          <div class="paperdoll-grid">
            <div class="equip-slot" data-slot="cloak"    aria-label="Cloak"></div>
            <div class="equip-slot" data-slot="head"     aria-label="Head"></div>
            <div class="equip-slot" data-slot="offhand"  aria-label="Off Hand"></div>

            <div class="equip-slot" data-slot="chest"    aria-label="Chest"></div>
            <!-- center cell is the sprite -->
            <div class="equip-slot" data-slot="mainhand" aria-label="Main Hand"></div>

            <div class="equip-slot" data-slot="belt"     aria-label="Belt"></div>
            <div class="equip-slot" data-slot="pants"    aria-label="Pants"></div>
            <div class="equip-slot" data-slot="boots"    aria-label="Boots"></div>

            <!-- satellites -->
            <div class="equip-slot" data-slot="jewelry"  aria-label="Jewelry"></div>
            <div class="equip-slot" data-slot="gadget"   aria-label="Gadget"></div>
          </div>
        </div>
      </div>
    </section>

    <!-- Shard (map) -->
    <section class="card map-card panel" id="mapCard" style="left:420px; top:60px;">
      <header class="card-h">Shard</header>
      <div class="canvas-wrap">
        <div id="frame"></div>
      </div>
    </section>

    <!-- Actions -->
    <aside class="action-dock card panel" id="cardActions" style="left:1180px; top:60px;">
      <header class="card-h">Actions</header>
      <div class="quick-actions">
        <button class="btn">Look</button>
        <button class="btn">Interact</button>
        <button class="btn">Rest</button>
        <button class="btn">Action 1</button>
        <button class="btn">Action 2</button>
      </div>
    </aside>

    <!-- Journal -->
    <section class="card panel" id="cardJournal" style="left:1410px; top:60px;">
      <header class="card-h">Journal</header>
      <textarea style="width:260px; height:140px;"></textarea>
    </section>

    <!-- Quest Log -->
    <section class="card panel" id="cardQuests" style="left:1640px; top:60px;">
      <header class="card-h">Quest Log</header>
      <div class="muted">No quests yet.</div>
    </section>

    <!-- Dev Items tray (new) -->
    <section class="card panel" id="cardDevTray" style="left:180px; top:160px;">
      <header class="card-h">Dev Items</header>
      <div class="dev-tray">
        <div id="devTrayGrid" class="dev-grid"></div>
        <div class="muted" style="margin-top:6px">Drag onto paperdoll (or anywhere that accepts <code>application/x-shard-item</code>).</div>
      </div>
    </section>
  </div>

  <!-- Scripts -->
  <script src="/static/js/panels.js"></script>
  <script src="/static/js/shardLoader.js" type="module"></script>
  <script src="/static/js/paperdoll.panel.js"></script>
  <script src="/static/js/dev-tray.js"></script>
  <script src="/static/js/user-chip.js"></script>
</body>
</html>
